<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Login Page</title>
    <link href="../css/main.css" rel="stylesheet">
  </head>
  <body>
    <form onsubmit="signIn()">
      <h1>Please sign in</h1>
      <label for="email">Email address</label>
      <input type="email" id="email" placeholder="Email address" required autofocus>
      <label for="password">Password</label>
      <input type="password" id="password" placeholder="Password" required>
      <button type="submit">Sign in</button>
      <a href="signup.html">Don't have an account? Sign up here.</a>
    </form>
    <script>
      function signIn()
      {
        const data = {
          email: document.getElementById('email').value,
          password: document.getElementById('password').value
        };

        const xhttp = new XMLHttpRequest();

        xhttp.onload = () => window.location.replace('../index.html');

        xhttp.onerror = (xhr) =>
        {
          window.alert(JSON.stringify(xhr));
          window.location.replace('/login.html');
        }

        xhttp.open('POST', '/login', true);

        xhttp.setRequestHeader('Content-type', 'application/json');

        xhttp.send(JSON.stringify(data));
      }
    </script>
  </body>
</html>
